---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Эзиз Хатамов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Отчёт по выполнению работы  

## Проверка конфигурации сети  

1. После получения прав администратора была выполнена команда ip -s link, которая отобразила информацию о сетевых интерфейсах и статистике передачи пакетов.  
   Интерфейс **enp0s3** находится в состоянии **UP**, что означает его активность. В нём указан MAC-адрес `08:00:27:84:d7:ba`, а также счётчики переданных и полученных пакетов, которые позволяют оценить сетевую активность и наличие ошибок.  

   ![Информация о сетевых интерфейсах и статистике пакетов](Screenshot_1.png){ #fig:001 width=80% }  

2. Команда ip route show вывела таблицу маршрутизации.  
   Основной маршрут по умолчанию направлен через шлюз **10.0.2.2**, а для подсети **10.0.2.0/24** используется интерфейс **enp0s3**. Это подтверждает корректную настройку сетевого доступа и наличие выхода в Интернет.  

3. Команда ip addr show показала назначенные IP-адреса для интерфейсов.  
   Интерфейс **enp0s3** имеет IPv4-адрес **10.0.2.15/24**, что позволяет устройству взаимодействовать с другими узлами в локальной сети.  
   Также присутствует адрес **127.0.0.1/8** для интерфейса **lo**, используемый для внутреннего взаимодействия в системе.  

4. Проверка доступности внешних ресурсов с помощью ping -c 4 8.8.8.8 показала успешную передачу всех пакетов без потерь, что подтверждает корректность сетевого подключения.  

   ![Проверка соединения с внешней сетью и добавление нового IP-адреса](Screenshot_2.png){ #fig:002 width=80% }  

5. После выполнения команды ip addr add 10.0.0.10/24 dev enp0s3 к интерфейсу **enp0s3** был добавлен дополнительный адрес **10.0.0.10/24**.  
   Команда ip addr show подтвердила наличие обоих адресов — **10.0.2.15** и **10.0.0.10**.  

6. Сравнение вывода команд ip и ifconfig показало, что обе утилиты предоставляют схожую информацию: IP-адреса, маски подсетей, состояние интерфейсов и статистику передачи данных.  
   Однако ip предоставляет более детализированные сведения и считается современным инструментом.  

   ![Информация о сетевых интерфейсах и активных портах](Screenshot_3.png){ #fig:003 width=80% }  

7. Команда ss -tul вывела список открытых портов TCP и UDP.  
   Среди активных соединений присутствуют порты **22 (ssh)**, **21 (ftp)**, **80 (http)** и **631 (ipp)**, что говорит о работе соответствующих сетевых служб на данном устройстве.  

## Управление сетевыми подключениями с помощью nmcli  

1. После получения прав администратора выполнена команда nmcli connection show, которая вывела текущие сетевые соединения.  
   Активным интерфейсом являлся **enp0s3** с типом **ethernet**.  

2. Для интерфейса **enp0s3** было добавлено соединение с именем **dhcp**.  
   Это соединение использует автоматическое получение сетевых параметров через DHCP.  

3. Также было добавлено статическое соединение **static** с параметрами: IPv4-адрес **10.0.0.10/24** и шлюз **10.0.0.1**.  
   После успешного выполнения команды оба соединения появились в списке доступных.  

   ![Создание и просмотр сетевых соединений через nmcli](Screenshot_4.png){ #fig:004 width=80% }  

4. Переключение на статическое соединение осуществлялось с помощью nmcli connection up "static".  
   После активации адрес интерфейса изменился на **10.0.0.10/24**, что подтверждено выводом ip addr.  

   ![Активация статического соединения](Screenshot_5.png){ #fig:005 width=80% }  

5. Возврат к подключению через DHCP выполнен командой nmcli connection up "dhcp".  
   В результате интерфейс снова получил адрес **10.0.2.15/24** от DHCP-сервера.  

   ![Переключение на соединение DHCP](Screenshot_6.png){ #fig:006 width=80% }  

## Изменение параметров соединения с помощью nmcli  

1. Было отключено автоподключение для соединения **static**, чтобы предотвратить его автоматическую активацию при запуске системы.  

2. В конфигурацию статического соединения добавлен DNS-сервер **10.0.0.10**, а затем — дополнительный DNS-сервер **8.8.8.8**.  
   Это обеспечивает резервное разрешение доменных имён при возможной недоступности основного DNS.  

3. Изменён основной IP-адрес соединения на **10.0.0.20/24**, после чего добавлен второй адрес **10.20.30.40/16**.  
   Наличие двух адресов позволяет устройству взаимодействовать сразу в двух подсетях.  

4. После внесения изменений соединение **static** было активировано.  
   Проверка командой nmcli connection show показала, что интерфейс **enp0s3** успешно использует новые параметры.  
   Команда ip addr подтвердила наличие обоих адресов — **10.0.0.20** и **10.20.30.40** — на сетевом адаптере.  

   ![Изменение параметров и проверка активации соединения](Screenshot_7.png){ #fig:007 width=80% }  

5. С помощью текстового интерфейса **nmtui** были просмотрены настройки сети.  
   Интерфейс показал параметры профиля **static**: адреса **10.0.0.20/24** и **10.20.30.40/16**, шлюз **10.0.0.1**, а также DNS-серверы **10.0.0.10** и **8.8.8.8**.  

   ![Просмотр настроек статического соединения через nmtui](Screenshot_8.png){ #fig:008 width=80% }  
   ![Параметры соединения dhcp в nmtui](Screenshot_9.png){ #fig:009 width=80% }  
   ![Активное соединение static в nmtui](Screenshot_10.png){ #fig:010 width=60% }  

6. В графическом интерфейсе операционной системы были также проверены настройки сети.  
   В разделе **IPv4** для профиля **static** метод подключения установлен как **Manual**.  
   Указаны адреса **10.0.0.20**, **10.20.30.40**, шлюз **10.0.0.1**, а также DNS-серверы **10.0.0.10** и **8.8.8.8**.  

   ![Настройки статического соединения в графическом интерфейсе](Screenshot_11.png){ #fig:011 width=80% }  
   ![Информация о подключении static](Screenshot_12.png){ #fig:012 width=80% }  

7. Для проверки корректности конфигурации также был просмотрен профиль **dhcp**.  
   Интерфейс **enp0s3** получил IP-адрес **10.0.2.15**, шлюз **10.0.2.2** и DNS-сервер **10.0.2.3**, что подтверждает успешное получение параметров от DHCP-сервера.  

   ![Параметры соединения dhcp в графическом интерфейсе](Screenshot_13.png){ #fig:013 width=80% }  

8. После проверки конфигурации система была переключена обратно на соединение **dhcp**, обеспечив автоматическое получение сетевых параметров и возвращение к первоначальной схеме подключения.  

# Контрольные вопросы  

1. **Какая команда отображает только статус соединения, но не IP-адрес?**  
   - `nmcli device status` — показывает состояние сетевых интерфейсов без указания IP-адресов.  
   - Пример: выводит тип устройства, состояние (connected/disconnected) и имя соединения.  

2. **Какая служба управляет сетью в ОС типа RHEL?**  
   - `NetworkManager` — служба, отвечающая за управление сетевыми подключениями.  
   - Она обеспечивает конфигурацию сетевых интерфейсов, маршрутизацию, DNS и автоматическое подключение.  

3. **Какой файл содержит имя узла (устройства) в ОС типа RHEL?**  
   - `/etc/hostname` — файл, в котором хранится имя хоста (устройства).  
   - Изменения в этом файле вступают в силу после перезагрузки системы или применения команды `hostnamectl set-hostname`.  

4. **Какая команда позволяет вам задать имя узла (устройства)?**  
   - `hostnamectl set-hostname <имя_узла>` — устанавливает новое имя хоста.  
   - Пример: `hostnamectl set-hostname server01` — задаёт имя устройства **server01**.  

5. **Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?**  
   - `/etc/hosts` — файл, сопоставляющий IP-адреса и имена хостов.  
   - Пример записи: `10.0.0.10 server.local` — добавляет локальное имя **server.local** для IP **10.0.0.10**.  

6. **Какая команда показывает текущую конфигурацию маршрутизации?**  
   - `ip route show` — выводит таблицу маршрутов.  
   - Пример: показывает шлюз по умолчанию, подсети и связанные интерфейсы.  

7. **Как проверить текущий статус службы NetworkManager?**  
   - `systemctl status NetworkManager` — отображает состояние службы.  
   - Пример: указывает, активна ли служба (active/running) и время её запуска.  

8. **Какая команда позволяет вам изменить текущий IP-адрес и шлюз по умолчанию для вашего сетевого соединения?**  
   - `nmcli connection modify <имя_соединения> ipv4.addresses <адрес>/<маска> ipv4.gateway <шлюз>`  
   - Пример: `nmcli connection modify static ipv4.addresses 10.0.0.20/24 ipv4.gateway 10.0.0.1` — изменяет IP и шлюз для соединения **static**.  


# Заключение  

В ходе работы были освоены команды и инструменты для настройки сетевых параметров в Linux, включая управление IP-адресами, маршрутами, DNS и сетевыми профилями с помощью утилит **ip**, **nmcli** и **nmtui**. Получены практические навыки конфигурирования как динамических, так и статических сетевых соединений.  
