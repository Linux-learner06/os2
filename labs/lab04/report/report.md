---
## Front matter
title: "Отчёт по лабораторной работе №4"
subtitle: "Работа с программными пакетами"
author: "Эзиз Хатамов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с репозиториями и менеджерами пакетов.

# Отчёт по выполнению работы  

## Работа с репозиториями  

1. Перешёл в режим суперпользователя с помощью команды **su -**, затем открыл каталог `/etc/yum.repos.d`. Ознакомился с содержимым и просмотрел файл `rocky.repo`, в котором описаны параметры зеркал для получения пакетов.  

   ![Содержимое репозиториев](Screenshot_1.png){ #fig:001 width=80% }  

2. Выполнил команду **dnf repolist** и получил список доступных репозиториев:  
   - **appstream** – содержит дополнительные пакеты приложений.  
   - **baseos** – основной набор пакетов для установки и работы ОС.  
   - **extras** – дополнительные пакеты, обеспечивающие поддержку и совместимость.  

   ![Список репозиториев](Screenshot_2.png){ #fig:002 width=80% }  

3. С помощью команды **dnf search user** были найдены пакеты, содержащие в имени или описании слово *user*. Среди них библиотеки для управления пользователями, пакеты для интеграции с графическими оболочками и утилиты для работы в пространстве пользователя.  

4. Изучил информацию о пакете **nmap**:  
   - **dnf search nmap** показала наличие пакетов `nmap` и `nmap-ncat`.  
   - **dnf info nmap** отобразила подробную информацию: версия, размер, репозиторий, описание и назначение пакета.  

   ![Информация о пакете nmap](Screenshot_3.png){ #fig:003 width=80% }  

   Установил пакет с помощью:  
   - **dnf install nmap** – установка только пакета `nmap`.  
   - **dnf install nmap\*** – установка пакета `nmap` вместе с дополнительными связанными компонентами (`nmap-ncat`).  

   ![Установка пакета nmap](Screenshot_4.png){ #fig:004 width=80% }  

5. Удалил пакет **nmap**:  
   - **dnf remove nmap** – удаляет только основной пакет.  
   - **dnf remove nmap\*** – удаляет и связанные компоненты (`nmap-ncat`).  

   ![Удаление пакета nmap](Screenshot_5.png){ #fig:005 width=80% }  

6. Получил список групп пакетов (**dnf groups list**) и установил группу **RPM Development Tools**, которая содержит инструменты для сборки пакетов RPM (`rpmdevtools`, `redhat-rpm-config`, `rpmbuild`).  

   ![Список и установка группы RPM Development Tools](Screenshot_6.png){ #fig:006 width=80% }  
   ![Установка группы RPM Development Tools](Screenshot_7.png){ #fig:007 width=80% }  

7. Удалил установленную группу пакетов с помощью команды **dnf groupremove "RPM Development Tools"**.  

   ![Удаление группы пакетов](Screenshot_8.png){ #fig:008 width=80% }  

8. Изучил историю использования команды **dnf history**, затем выполнил откат к состоянию до удаления группы пакетов (**dnf history undo 6**), что позволило восстановить ранее удалённые пакеты.  

   ![История и откат действий dnf](Screenshot_9.png){ #fig:009 width=80% } 

## Использование rpm  

1. Сначала был найден пакет **lynx** и выполнена его загрузка с помощью ключа `--downloadonly`, что позволило скачать rpm-пакет без установки.  

   ![Загрузка пакета lynx](Screenshot_10.png){ #fig:010 width=80% }  

2. С помощью команды **find /var/cache/dnf/ -name lynx*** был определён каталог, куда был загружен пакет. После этого выполнена установка с помощью команды **rpm -Uhv lynx-2.9.0-6.el10.x86_64.rpm**.  

3. Определено расположение исполняемого файла с помощью **which lynx**, а затем проверено, какому пакету принадлежит данный файл (**rpm -qf $(which lynx)**). Дополнительно была получена подробная информация о пакете (**rpm -qi lynx**).  

   ![Информация о пакете lynx](Screenshot_11.png){ #fig:011 width=80% }  

4. С помощью команды **rpm -ql lynx** был получен список всех файлов, входящих в пакет.  
   Отдельно был выведен перечень файлов документации командой **rpm -qd lynx**.  

   ![Список файлов пакета lynx](Screenshot_12.png){ #fig:012 width=80% }  
   ![Файлы документации пакета lynx](Screenshot_13.png){ #fig:013 width=80% }  

5. Для просмотра документации был использован **man lynx**, где содержится руководство пользователя по работе с текстовым браузером.  

   ![Документация по lynx](Screenshot_14.png){ #fig:014 width=80% }  

6. После установки была проверена корректность работы программы запуском **lynx** в пользовательском режиме.  

   ![Запуск текстового браузера lynx](Screenshot_15.png){ #fig:015 width=80% }  

7. Для определения конфигурационных файлов была использована команда **rpm -qc lynx**.  
   Также просмотрены скрипты, выполняемые при установке пакета (**rpm -q --scripts lynx**). Эти скрипты применяются для автоматической настройки окружения и регистрации необходимых компонентов.  

8. Завершающим шагом был удалён пакет с помощью команды **rpm -e lynx**. Проверка командой **ls** показала, что пакет был успешно удалён.  

   ![Удаление пакета lynx](Screenshot_16.png){ #fig:016 width=80% }  
   

## Установка и использование пакета dnsmasq  

1. Был установлен пакет **dnsmasq** с помощью команды **dnf install dnsmasq**. После этого с помощью команды **which dnsmasq** определено расположение исполняемого файла – `/usr/sbin/dnsmasq`.  

   ![Установка и проверка расположения dnsmasq](Screenshot_17.png){ #fig:017 width=80% }  

2. С помощью команды **rpm -qf $(which dnsmasq)** определено, что данный файл принадлежит пакету `dnsmasq`.  
   Команда **rpm -qi dnsmasq** вывела подробную информацию о пакете: версия, архитектура, дата установки, описание и назначение (лёгкий DNS-, DHCP- и TFTP-сервер).  

3. Команда **rpm -ql dnsmasq** показала полный список файлов, входящих в пакет, включая бинарные файлы, конфигурацию и документацию.  
   Отдельно с помощью **rpm -qd dnsmasq** был выведен перечень файлов документации.  

   ![Список файлов пакета dnsmasq](Screenshot_18.png){ #fig:018 width=80% }  

   Для изучения документации была использована команда **man dnsmasq**, где приведено описание возможностей и параметров запуска сервиса.  

   ![Документация по dnsmasq](Screenshot_19.png){ #fig:019 width=80% }  

4. С помощью команды **rpm -qc dnsmasq** был получен список конфигурационных файлов пакета (`/etc/dnsmasq.conf`, `/etc/dnsmasq.d/`, файлы systemd-сервисов).  

   Далее просмотрены скрипты установки пакета (**rpm -q --scripts dnsmasq**).  
   Эти скрипты выполняют:  
   - создание системного пользователя и группы `dnsmasq`;  
   - регистрацию и активацию systemd-сервиса;  
   - действия при обновлении и удалении пакета (остановка и перезапуск службы).  

5. Завершающим шагом пакет **dnsmasq** был удалён с помощью команды **rpm -e dnsmasq**, что подтвердило успешное завершение работы.  

   ![Удаление пакета dnsmasq](Screenshot_20.png){ #fig:020 width=80% }  


# Контрольные вопросы  

### 1. Какая команда позволяет вам искать пакет rpm, содержащий файл useradd?  
Для поиска пакета, которому принадлежит файл, используется команда:  
- `rpm -qf /usr/sbin/useradd` — если файл уже установлен в системе;  
- `dnf provides /usr/sbin/useradd` — если нужно найти пакет в репозиториях.  

### 2. Какие команды вам нужно использовать, чтобы показать имя группы dnf, которая содержит инструменты безопасности и показать, что находится в этой группе?  
- `dnf group list` — отобразит список доступных групп;  
- `dnf group info "Security Tools"` — покажет содержимое группы **Security Tools**.  

### 3. Какая команда позволяет вам установить rpm, который вы загрузили из Интернета и который не находится в репозиториях?  
- `rpm -ivh имя_пакета.rpm` — установить пакет;  
- `rpm -Uvh имя_пакета.rpm` — установить или обновить пакет.  

### 4. Вы хотите убедиться, что пакет rpm, который вы загрузили, не содержит никакого опасного кода сценария. Какая команда позволяет это сделать?  
- `rpm -qp --scripts имя_пакета.rpm` — отобразит скрипты, выполняемые при установке пакета.  

### 5. Какая команда показывает всю документацию в rpm?  
- `rpm -qd имя_пакета` — выведет список всех файлов документации, входящих в пакет.  

### 6. Какая команда показывает, какому пакету rpm принадлежит файл?  
- `rpm -qf путь_к_файлу` — определяет, к какому пакету принадлежит данный файл.  


# Заключение  

В ходе работы были изучены возможности управления пакетами в Linux с помощью утилит **dnf** и **rpm**. На практике освоены приёмы установки, удаления и получения информации о пакетах и группах пакетов, а также работа с их конфигурационными файлами и документацией.  
