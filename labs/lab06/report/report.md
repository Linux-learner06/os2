---
## Front matter
title: "Отчёт по лабораторной работе №6"
subtitle: "Управление процессами"
author: "Эзиз Хатамов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки управления процессами операционной системы.

# Отчёт по выполнению работы  

## Управление заданиями  

1. Пользователь получил полномочия администратора с помощью команды `su -`.  

2. В фоновом режиме были запущены команды:  
   - `sleep 3600 &`  
   - `dd if=/dev/zero of=/dev/null &`  
   Дополнительно была запущена команда `sleep 7200` без амперсанда.  

3. Так как команда `sleep 7200` выполнялась на переднем плане, для остановки её работы использовалось сочетание клавиш **Ctrl+Z**.  

4. Команда `jobs` показала три активных задания:  
   - задание 1 и 2 находились в состоянии **Running**,  
   - задание 3 — в состоянии **Stopped**.  

5. Для возобновления выполнения задания 3 в фоновом режиме была выполнена команда `bg 3`.  
   Статус изменился на **Running**.  

6. Перемещение задания 1 на передний план осуществлялось командой `fg 1`.  
   Далее оно было прервано комбинацией **Ctrl+C**. 

   ![Управление заданиями  ](Screenshot_1.png){ #fig:001 width=80% }   

7. Аналогично задания 2 и 3 были выведены на передний план (`fg 2`, `fg 3`) и прерваны комбинацией **Ctrl+C**.  

8. В другом терминале под обычным пользователем было запущено `dd if=/dev/zero of=/dev/null &`.  
   Процесс успешно стартовал в фоне. 

    ![Фоновый процесс](Screenshot_2.png){ #fig:002 width=80% }  

9. После выхода из второго терминала команда `top` в другом окне показала, что процесс **dd** продолжает выполняться.  

   ![Отображение фонового процесса dd в top](Screenshot_3.png){ #fig:003 width=80% }  

10. Для завершения процесса в `top` использовалась клавиша **k**, после чего задание **dd** было остановлено.  

   ![Завершение работы процесса dd в top](Screenshot_4.png){ #fig:004 width=80% }  

## Управление процессами  

1. Пользователь получил полномочия администратора с помощью команды `su -`.  

2. В фоновом режиме были запущены три процесса:  
   - `dd if=/dev/zero of=/dev/null &`  
   - `dd if=/dev/zero of=/dev/null &`  
   - `dd if=/dev/zero of=/dev/null &`  

3. Для проверки списка запущенных процессов использовалась команда `ps aux | grep dd`.  
   В результате были отображены три активных процесса **dd**.  

   ![Список процессов dd](Screenshot_5.png){ #fig:005 width=80% }  

4. Приоритет одного из процессов был изменён с помощью команды `renice -n 5 <PID>`.  
   В отчёте видно, что приоритет процесса с PID 6618 изменился с 0 на 5.  

5. Для отображения иерархии процессов была использована команда `ps fax | grep -B5 dd`.  
   Она показала дерево процессов, включая родительскую оболочку, из которой были запущены все процессы **dd**.  

6. Используя найденный PID родительской оболочки, была выполнена команда `kill -9 <PID>`.  
   В результате завершилась корневая оболочка и автоматически остановились все дочерние процессы **dd**.  

   ![Завершение родительской оболочки и дочерних процессов dd](Screenshot_6.png){ #fig:006 width=80% }  

## Задание 1. Управление приоритетами процессов  

1. Пользователь получил права администратора с помощью команды `su`.  

2. В фоновом режиме были запущены три процесса:  
   - `dd if=/dev/zero of=/dev/null &`  
   - `dd if=/dev/zero of=/dev/null &`  
   - `dd if=/dev/zero of=/dev/null &`  

   Каждый процесс получил собственный PID.  

3. Приоритет одного из процессов был изменён командой `renice -n 5 <PID>`.  
   В результате его приоритет изменился с **0** на **5**.  

4. Далее приоритет того же процесса был снова изменён:  
   - команда `renice -n 15 <PID>` повысила значение приоритета до **15**.  

   Разница заключается в том, что:  
   - **меньшее значение nice (например, −5)** повышает приоритет процесса, предоставляя ему больше процессорного времени;  
   - **большее значение nice (например, 15)** понижает приоритет, снижая доступное процессорное время.  

5. Для завершения всех запущенных процессов **dd** использовалась команда `killall dd`.  
   Все три процесса были успешно остановлены.  

   ![Управление приоритетами и завершение процессов dd](Screenshot_7.png){ #fig:007 width=80% }  

## Задание 2. Работа с процессами и заданиями  

1. В фоновом режиме была запущена программа `yes` с подавлением потока вывода:  
   - `yes > /dev/null &`  

2. Программа `yes` была запущена на переднем плане с перенаправлением вывода.  
   С помощью **Ctrl+Z** выполнение было приостановлено, затем процесс возобновлён и завершён.  

3. Программа `yes` была запущена на переднем плане без подавления потока вывода.  
   После нескольких выводов символа **y** её выполнение было приостановлено (**Ctrl+Z**), возобновлено и завершено (**Ctrl+C**).  

   ![Работа с процессом yes на переднем плане](Screenshot_8.png){ #fig:008 width=80% }  

4. Проверка состояния заданий с помощью команды `jobs` показала активные и приостановленные процессы.  

5. Один из процессов, выполнявшийся в фоне, был переведён на передний план командой `fg` и остановлен.  

6. Процесс с подавлением вывода был переведён обратно в фоновый режим командой `bg`.  

7. Повторная команда `jobs` подтвердила, что процесс находится в состоянии **Running** в фоне.  

8. Для запуска процесса, продолжающего работу после выхода из терминала, использовалась команда:  
   - `nohup yes > /dev/null &`  

   ![Запуск процесса yes с nohup](Screenshot_9.png){ #fig:009 width=80% }  

9. После закрытия окна терминала процесс, запущенный через `nohup`, продолжил работу.  

10. Для просмотра состояния процессов использовалась утилита `top`, где были видны процессы **yes**, нагружающие процессор.  

   ![Процессы yes в top](Screenshot_10.png){ #fig:010 width=80% }  

11. Дополнительно были запущены три программы `yes` в фоновом режиме.  

12. Два процесса были завершены разными способами:  
   - по PID с помощью команды `kill <PID>`;  
   - по идентификатору задания с помощью команды `kill %<номер_задания>`.  

13. Была предпринята попытка отправить сигнал **SIGHUP (1)** процессу, запущенному с помощью `nohup`, и обычному процессу.  
   - процесс без `nohup` завершился;  
   - процесс с `nohup` продолжил работу.  

   ![Завершение процессов yes](Screenshot_11.png){ #fig:011 width=80% }  

14. Были запущены новые процессы `yes` в фоне.  

15. Для их одновременного завершения использовалась команда:  
   - `killall yes`  

16. Программа `yes` была запущена с разным приоритетом:  
   - `yes > /dev/null &` (обычный приоритет 0),  
   - `nice -n 5 yes > /dev/null &` (пониженный приоритет 5).  

   Сравнение в выводе `ps -l` показало различие в значениях **NI** (nice).  

17. Приоритет одного из потоков был изменён командой `renice`, чтобы у обоих процессов он стал одинаковым.  

   ![Изменение приоритетов процессов yes](Screenshot_12.png){ #fig:012 width=80% }  

# Контрольные вопросы  

1. **Какая команда даёт обзор всех текущих заданий оболочки?**  
   - `jobs`  
   - Пример: `jobs` — выводит список всех фоновых и приостановленных заданий.  

2. **Как остановить текущее задание оболочки, чтобы продолжить его выполнение в фоновом режиме?**  
   - `Ctrl+Z` — приостановка выполнения.  
   - `bg` — продолжение выполнения в фоне.  

3. **Какую комбинацию клавиш можно использовать для отмены текущего задания оболочки?**  
   - `Ctrl+C` — завершает текущее задание.  

4. **Необходимо отменить одно из начатых заданий. Доступ к оболочке, в которой работает пользователь, невозможен. Что можно сделать?**  
   - Использовать команду `kill <PID>` в другой оболочке.  
   - Пример: `kill 1234` — завершает процесс с PID **1234**.  

5. **Какая команда используется для отображения отношений между родительскими и дочерними процессами?**  
   - `ps fax`  
   - Пример: `ps fax | grep dd` — покажет дерево процессов с фильтрацией по **dd**.  

6. **Какая команда позволит изменить приоритет процесса с идентификатором 1234 на более высокий?**  
   - `renice -n -5 -p 1234` — повысить приоритет процесса.  

7. **В системе в настоящее время запущено 20 процессов dd. Как проще всего остановить их все сразу?**  
   - `killall dd` — завершает все процессы с именем **dd**.  

8. **Какая команда позволяет остановить команду с именем mycommand?**  
   - `killall mycommand`  

9. **Какая команда используется в top, чтобы убить процесс?**  
   - В `top` нажать клавишу `k`, затем указать **PID** процесса.  

10. **Как запустить команду с достаточно высоким приоритетом, не рискуя, что не хватит ресурсов для других процессов?**  
    - Использовать `nice` с положительным значением.  
    - Пример: `nice -n 10 ./script.sh` — запускает команду с пониженным приоритетом, оставляя ресурсы другим процессам.  

# Заключение  

В ходе работы были изучены команды для управления заданиями и процессами в Linux: `jobs`, `bg`, `fg`, `kill`, `killall`, `ps fax`, а также утилиты `top`, `nice` и `renice`. Эти инструменты позволяют контролировать выполнение процессов, управлять их приоритетами и корректно завершать работу в различных ситуациях.  
